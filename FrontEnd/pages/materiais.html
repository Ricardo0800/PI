<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Materiais</title>
    <link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/bulma@1.0.2/css/bulma.min.css"
>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-ChzDzmAAZJA<ctrl61>w9nKToSX3rKV4mE3bZ7ouYGE0t+w0Ni/1RWhGztBczynPnDJ1tE1m/ePuQ6bbCjvPtO59emGS1u+X+9c6V8" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>

        #pesquisa{
            margin-top: 4px;
            width: 30vw;
        }
        #links-start{
            gap: 10px;
        }
        iframe {
      width: 100%;
      height: 500px;
      border: none;
    }
    </style>
</head>
<body>
    <header class="box navbar " id="navbar-flex">
        <div class="navbar-brand">
        <a class="navbar-item" href="../../index.html">
            <h1 class="title" id="title">Jogos Na Educação</h1>
            </a>

        </div>
        <div id="navbarBasicExample" class="navbar-menu">
            <div class="navbar-start" id="links-start">
              <a class="navbar-item" href="../../index.html">Início</a>
              <a class="navbar-item" href="biblioteca.html">Biblioteca</a>
              <a class="navbar-item" href="materiais.html">Materiais</a>
              <a class="navbar-item" href="quemSomos.html">Quem Somos</a>
                </div>
                <div class="navbar-end">
                    <div class="control has-icons-left">
                        <input class="input" type="text" placeholder="Pesquisar" id="pesquisa">
                        <span class="icon is-left">
                        <i class="fas 1  fa-search"></i>
                        </span>
                        </div>
                </div>
                
                
    </header>
    <section class="section">
        <div class="container">
          <h2 class="title">Materiais de Estudo</h2>
          <ul id="materials-list">
            <!-- Os materiais serão inseridos dinamicamente pelo JavaScript -->
          </ul>
        </div>
      </section>
    
      <!-- Modal (Bulma) -->
      <div id="pdf-modal" class="modal">
        <div class="modal-background"></div>
        <div class="modal-content">
          <div class="box">
            <iframe id="pdf-frame" src=""></iframe>
          </div>
        </div>
        <button class="modal-close is-large" aria-label="close"></button>
      </div>
    
      <!-- Scripts -->
      <script>
        // Lista de materiais
        const materials = [
          {
            title: "INTRODUÇÃO À GEOMETRIA ESPACIAL COM O JOGO MINECRAFT",
            description: "Neste PDF você aprenderá noções básicas de geometria no minecraft.",
            pdfUrl: "https://educapes.capes.gov.br/bitstream/capes/206568/2/produto_educacional_geometria_espacial_com_minecraft.pdf" // Substitua pelo link do seu PDF
          },
         
          {
            title: "Benefícios do minecraft nos anos iniciais",
            description: "Um artigo que visa discutir o quão útil pode ser o minecraft na educação.",
            pdfUrl: "https://www.abed.org.br/congresso2022/77971.pdf"
          }
        ];
    
        // Elementos HTML
        const materialsList = document.getElementById('materials-list');
        const pdfModal = document.getElementById('pdf-modal');
        const pdfFrame = document.getElementById('pdf-frame');
        const closeModal = pdfModal.querySelector('.modal-close');
        const modalBackground = pdfModal.querySelector('.modal-background');
    
        // Renderizando os materiais
        materials.forEach(material => {
          const listItem = document.createElement('li');
          listItem.classList.add('box', 'mb-4');
          listItem.innerHTML = `
            <p class="title is-5">${material.title}</p>
            <p>${material.description}</p>
            <button class="button is-link">Ver Material</button>
          `;
    
          // Evento de clique para abrir o modal
          const button = listItem.querySelector('button');
          button.addEventListener('click', () => {
            pdfFrame.src = material.pdfUrl; // Carrega o PDF no iframe
            pdfModal.classList.add('is-active'); // Exibe o modal
          });
    
          materialsList.appendChild(listItem);
        });
    
        // Fechar o modal
        const closeModalFunction = () => {
          pdfModal.classList.remove('is-active');
          pdfFrame.src = ''; // Limpa o iframe
        };
    
        closeModal.addEventListener('click', closeModalFunction);
        modalBackground.addEventListener('click', closeModalFunction);
      </script>

<script type="module">
  import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';

  const supabaseUrl = 'YOUR_SUPABASE_URL'; // Substitua com sua URL do Supabase
  const supabaseKey = 'YOUR_SUPABASE_ANON_KEY'; // Substitua com sua chave anon do Supabase
  // AVISO DE SEGURANÇA: Credenciais do Supabase estão expostas no frontend. Em produção, considere usar um proxy reverso ou um backend para intermediar as chamadas ao Supabase.
  const supabase = createClient(supabaseUrl, supabaseKey);

  // Redirecionar para a página de login se não estiver logado
  const redirectToLoginIfNotLoggedIn = async () => {
      const { data: { user } } = await supabase.auth.getUser();
      if (!user) {
          window.location.href = '../../index.html'; // Ajuste o caminho para a sua página inicial
      } else {
          // Se estiver logado, você pode buscar informações do usuário aqui, se necessário
          console.log('Usuário logado:', user);
          // Se você quiser fazer algo quando o usuário está logado nessas páginas, faça aqui.
      }
  };

  // Verificar o estado da sessão ao carregar a página
  redirectToLoginIfNotLoggedIn();
</script>
</body>
</html>